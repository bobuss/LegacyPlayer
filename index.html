<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>node-player</title>

</head>

<body>
    <header>
        <h1>modern javascript implementation of node-player</h1>

    </header>
    <main>

        <button id="load">LOAD</button>
        <button id="play">PLAY</button>
        <button id="stop">STOP</button>
        <button id="next">TRACK 4</button>

        <canvas width="512" height="128" id="visualizer"></canvas>

    </main>
    <footer>

    </footer>
</body>

<script type="module">

    import { NodePlayer } from './node_player.js';

    const songUrl = 'http://modland.com/pub/modules/SNDH/Jochen%20Hippel/wings%20of%20death.sndh'
    // 'http://modland.com/pub/modules/SNDH/Furax/virtual%20escape%20theme.sndh'
    // 'https://modland.com/pub/modules/SC68/Tao/magnetic%20(sid%20emulator%20version).sc68'

    const player = new NodePlayer()

    const canvas = document.getElementById('visualizer')
    player.enableSpectrum(canvas)

    const loadButton = document.getElementById('load');
    loadButton.addEventListener('click', async (e) => {
        await player.load(songUrl, 2);
    });

    const playButton = document.getElementById('play');
    playButton.addEventListener('click', async (e) => {
        player.play()
    });

    const stopButton = document.getElementById('stop');
    stopButton.addEventListener('click', async (e) => {
        player.pause()
    });

    const nextButton = document.getElementById('next');
    nextButton.addEventListener('click', async (e) => {
        player.setTrack(4)
    });


</script>

</html>
